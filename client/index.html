<!doctype html>
    <head>
        <meta charset="utf-8">
        <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/blog/">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>


        <!-- Custom styles for this template -->
        <link href="https://fonts.googleapis.com/css?family=Playfair&#43;Display:700,900&amp;display=swap" rel="stylesheet">
        <!-- Custom styles for this template -->
        <link href="style.css" rel="stylesheet">

        <script>
            async function get_posts() {
                const response = await fetch("http://127.0.0.1:5000/pages", {
                    method: 'GET',
                    headers: {
                        'indexes': 0,
                        'user_id': 1
                    }
                } )
                let json = await response.json();
                console.log(json[0]);

                
                
                for (var i = 0; i < json[0].length; i++){
                    const template = document.querySelector('#post_template');
                    const clone = template.content.cloneNode(true);
                    clone.querySelectorAll("#title")[0].textContent = decodeURIComponent(json[0][i]["name"]);
                    clone.querySelectorAll("#date")[0].textContent = json[0][i]["date"];
                    clone.querySelectorAll("#preview")[0].textContent = decodeURIComponent(json[0][i]["preview_content"]);
                    clone.querySelectorAll("#tags")[0].textContent = decodeURIComponent(json[0][i]["tags"]);

                    document.querySelector("#posts").appendChild(clone);
                }
            }
        </script>

    </head>

    <body onload="get_posts();">

        <div class="header sticky-top">
            <header class="blog-header py-3">
                <div class="text-center">
                    <a class="blog-header-logo text-dark" href="index.html">GameTavern</a>
                </div>
            </header>

            <div class="nav-scroller py-1 mb-2">
                <nav class="nav d-flex justify-content-between">
                    <a class="p-2 link-secondary" href="#">Популярное</a>
                    <a class="p-2 link-secondary" href="#">Новое</a>
                    <a class="p-2 link-secondary" href="#">Лента</a>
                    <a class="p-2 link-secondary" href="#">Закладки</a>
                    <a class="p-2 link-secondary" href="#">Профиль</a>
                    <a class="p-2 link-secondary" href="#">Создать пост</a>
                </nav>
            </div>
        </div>

        <main class="container">
            <div class="posts" id="posts">

                <template id="post_template">
                    <div class="post">
                        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                            <div class="col p-4 d-flex flex-column position-static">
                                <strong id="tags" class="d-inline-block mb-2 text-primary">World</strong>
                                <h3 id="title" class="mb-0">Featured post</h3>
                                <div id="date" class="mb-1 text-muted">Nov 12</div>
                                <p id="preview" class="card-text mb-auto">This is a wider card with supporting text below as a natural lead-in to additional content.</p>
                                <a href="#" class="stretched-link"></a>
                            </div>
                        </div>
                    </div>
                  </template>
                

        </main>

        <footer class="blog-footer">
            <p>GameTavern</p>
            <p><a href="#">Наверх</a></p>
        </footer>



    </body>
</html>
